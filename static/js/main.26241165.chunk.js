(this["webpackJsonpreact-spotify-lyrics"]=this["webpackJsonpreact-spotify-lyrics"]||[]).push([[0],{139:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(50),s=n.n(c),r=(n(61),n(7)),l=(n(62),n(26),n(54)),i=n(25),u=n(17),m=n.n(u),g=n(14),p=n.n(g),f=n(15);var y=function(e){return o.a.createElement("div",null,Object.entries(e.currentlyPlayingSong.song).length?o.a.createElement(a.Fragment,null,o.a.createElement("p",null,"Song: ",e.currentlyPlayingSong.song.item.name),o.a.createElement("p",null,"Artist: ",e.currentlyPlayingSong.song.item.artists.map((function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n===e.currentlyPlayingSong.song.item.artists.length-1?o.a.createElement("span",{key:n+1},t.name):o.a.createElement("span",{key:n+1},t.name,", ")}))),o.a.createElement("img",{src:e.currentlyPlayingSong.song.item.album.images[1].url,alt:"Album Cover"})):204===e.currentlyPlayingSong.statusCode?o.a.createElement("p",null,"No song is currently playing!"):o.a.createElement("p",null,"Ups! Something went wrong!"))},v=n(55),d=n(52),h=n(51);var E=function(e){var t=Object(a.useState)(""),n=Object(r.a)(t,2),c=n[0],s=n[1],l=Object(a.useState)(!0),i=Object(r.a)(l,2),u=i[0],m=i[1],g=e.songInformation.song,p=e.songInformation.artist[0].name;return Object(a.useEffect)((function(){var e={apiKey:"",title:g,artist:p,optimizeQuery:!0};m(!0),s(""),Object(h.getLyrics)(e).then((function(e){s(e),m(!1)}))}),[p,g]),o.a.createElement("div",null,u?o.a.createElement(d.a,{animation:"border",role:"status"},o.a.createElement("span",{className:"sr-only"},"Loading...")):o.a.createElement("p",null),c?o.a.createElement("div",{className:"lyrics"},c):o.a.createElement("p",null,"Fetching lyrics"))};var b=function(e){var t=Object(a.useState)({song:{},statusCode:""}),n=Object(r.a)(t,2),c=n[0],s=n[1];!function(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){e.accessToken&&l(e.accessToken)}),c.song.is_playing?1e3:5e3),Object(a.useEffect)((function(){e.accessToken&&l(e.accessToken)}),[e.accessToken]);var l=function(e){console.log("Currently playing:");var t={headers:{Authorization:"Bearer ".concat(e)}};p.a.get("https://api.spotify.com/v1/me/player",t).then((function(e){200===e.status?s({song:e.data,statusCode:e.status}):200!==e.status&&console.log(e)})).catch((function(e){console.log(e)}))};return o.a.createElement("div",null,e.accessToken&&Object.entries(c.song).length?o.a.createElement("div",{className:"row align-items-center"},o.a.createElement("div",{className:"col-sm vw-100"},o.a.createElement(y,{currentlyPlayingSong:c}),o.a.createElement(v.a,{className:"progressBar",now:c.song.progress_ms,max:c.song.item.duration_ms}),o.a.createElement(f.a,{className:"control-button",onClick:function(){var t;t=e.accessToken,console.log("Skipping song"),m.a.ajax({url:"https://api.spotify.com/v1/me/player/previous",type:"POST",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer ".concat(t))},success:function(e){console.log(e)},error:function(e){console.log(e)}})}},"Previous"),o.a.createElement(f.a,{className:"control-button",onClick:function(){return t=e.accessToken,s({song:Object(i.a)(Object(i.a)({},c.song),{},{is_playing:!c.song.is_playing})}),void m.a.ajax({url:c.song.is_playing?"https://api.spotify.com/v1/me/player/pause":"https://api.spotify.com/v1/me/player/play",type:"PUT",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer ".concat(t))},success:function(e){console.log(e)},error:function(e){console.log(e)}});var t}},c.song.is_playing?o.a.createElement("span",null,"Stop"):o.a.createElement("span",null,"Play")),o.a.createElement(f.a,{className:"control-button",onClick:function(){var t;t=e.accessToken,console.log("Skipping song"),m.a.ajax({url:"https://api.spotify.com/v1/me/player/next",type:"POST",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer ".concat(t))},success:function(e){console.log(e)},error:function(e){console.log(e)}})}},"Next")),o.a.createElement("div",{className:"col-sm overflow-auto vw-100 vh-100"},o.a.createElement(E,{songInformation:{song:c.song.item.name,artist:c.song.item.artists}}))):o.a.createElement(f.a,{disabled:!0},"Play"))},k=n(136),j=new l.a,w=["user-read-playback-state","user-read-currently-playing","user-read-private","user-modify-playback-state","user-read-recently-played"];var S=function(){var e=Object(a.useState)(""),t=Object(r.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){var e=k.parse(window.location.hash)["#access_token"],t=k.parse(window.location.hash).expires_in,n=j.get("access_token");if(void 0!==n)console.log("got it from cookies"),c(n);else if(e){c(e);var a=new Date;a.setTime(a.getTime()+t/60*60*1e3),j.set("access_token",e,{path:"/",expires:a})}}),[n]),o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header container-fluid"},n?o.a.createElement(b,{accessToken:n}):o.a.createElement("a",{href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("","&redirect_uri=").concat("http://localhost:3000","&scope=").concat(w.join("%20"),"&response_type=token&show_dialog=true")},"Login to Spotify")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},56:function(e,t,n){e.exports=n(139)},61:function(e,t,n){},62:function(e,t,n){}},[[56,1,2]]]);
//# sourceMappingURL=main.26241165.chunk.js.map